<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="/img/iconos/salud.png" type="image/png">        
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/perfiles.css">
    <title>Mis informes</title>
</head>
<body>
  <%- include('./partials/header');%>
  <%- include('./partials/navbarPaciente');%>
  <%- include('./partials/footer'); %>

  <div class="container d-flex justify-content-center">
      <div class="card bg-custom-card text-white mt-3" style="border-radius: 1rem;">
        <div class="card-body text-center">
          <h1 class="mb-4 text-center">Lista de Informes</h1>

          <fieldset class="boxForm text-center mt-2">
            <div class="container-fluid text-center text-black mt-2">
                <div class="mx-auto col-md-12">
                    <button class="w-40 boton btn btn-primary mb-3" title="Agregar" onclick="subirInforme('<%= info.idUser %>', '<%= info.nombre %>', '<%= info.apellidos %>')">Subir Informe</button>
                </div>
            </div>
          </fieldset>

          <form class="d-flex align-items-center">
            <input class="form-control me-2 " type="buscar" placeholder="Buscar" aria-label="Buscar" id="buscar">
            <button class="btn btn-dark" type="submit">
              <img src="/img/iconos/lupa.png"width="20" height="20">
            </button>
          </form>
          <br>
          <table class="table table-striped">
              <thead>
                <tr><!--Encabezado-->
                  <!--Añado la clase cursor para en las css hacer que me aparezca clicable y el usuario lo pueda ver bien-->
                  <th scope="col" class="cursor" id="fecha-ord">Fecha</th>
                  <th scope="col" class="cursor" id="descripcion-ord">Descripción</th>
                  <th scope="col" class="cursor" id="archivo-ord">Archivo</th>
                </tr>
              </thead>
              <tbody>
                  <!--Informacion de la tabla-->
                  <% informes.forEach(i => { %>
                      <tr valign="middle" class ="fila">
                          <td class="busqueda"><%= new Date(i.fecha).toLocaleDateString() %></td>
                          <td class="busqueda"><%=i.descripcion%></td>
                          <td class="busqueda"><a type="button" class="btn text-dark" style="display: flex; align-items: center;" href="/verInforme/<%=i.id%>"><img src="/img/iconos/iconoPDF.png"width="40" height="40" title="Ver documento"> <%=i.nombreArchivo%></a></td>
                      </tr>
                  <% });%>
              </tbody>
            </table>

          </div>
      </div>
  </div>

  <%- include("./modals/mSubirInforme")%>

  <div class="resto2"></div>

  <script src="/javascript/scripts.js" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>